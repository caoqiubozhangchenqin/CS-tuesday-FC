// pages/novel/recommend/recommend.js
Page({
  data: {
    currentCategory: 'hot',
    categories: [
      { id: 'hot', name: 'çƒ­é—¨', icon: 'ğŸ”¥' },
      { id: 'xuanhuan', name: 'ç„å¹»', icon: 'âš”ï¸' },
      { id: 'xianxia', name: 'ä»™ä¾ ', icon: 'ğŸ—¡ï¸' },
      { id: 'dushi', name: 'éƒ½å¸‚', icon: 'ğŸ™ï¸' },
      { id: 'yanqing', name: 'è¨€æƒ…', icon: 'ğŸ’•' },
      { id: 'kehuan', name: 'ç§‘å¹»', icon: 'ğŸš€' }
    ],
    
    // æ¨èä¹¦ç±æ•°æ®
    recommendBooks: {
      hot: [
        { id: 1, name: 'æ–—ç ´è‹ç©¹', author: 'å¤©èš•åœŸè±†', icon: 'ğŸ”¥', intro: 'ä¸‰åå¹´æ²³ä¸œï¼Œä¸‰åå¹´æ²³è¥¿ï¼Œè«æ¬ºå°‘å¹´ç©·ï¼', tags: ['ç„å¹»', 'çƒ­è¡€', 'çˆ½æ–‡'] },
        { id: 2, name: 'é®å¤©', author: 'è¾°ä¸œ', icon: 'â­', intro: 'å†°å†·ä¸é»‘æš—å¹¶å­˜çš„å®‡å®™æ·±å¤„ï¼Œä¹å…·åºå¤§çš„é¾™å°¸æ‹‰ç€ä¸€å£é’é“œå¤æ£º...', tags: ['ç„å¹»', 'ç»å…¸', 'çƒ­è¡€'] },
        { id: 3, name: 'å®Œç¾ä¸–ç•Œ', author: 'è¾°ä¸œ', icon: 'ğŸŒ', intro: 'ä¸€ç²’å°˜å¯å¡«æµ·ï¼Œä¸€æ ¹è‰æ–©å°½æ—¥æœˆæ˜Ÿè¾°ï¼Œå¼¹æŒ‡é—´å¤©ç¿»åœ°è¦†ã€‚', tags: ['ç„å¹»', 'çƒ­è¡€'] },
        { id: 4, name: 'æ­¦åŠ¨ä¹¾å¤', author: 'å¤©èš•åœŸè±†', icon: 'âš¡', intro: 'ä¿®ç‚¼ä¸€é€”ï¼Œä¹ƒçªƒé˜´é˜³ï¼Œå¤ºé€ åŒ–ï¼Œè½¬æ¶…ç›˜ï¼Œæ¡ç”Ÿæ­»...', tags: ['ç„å¹»', 'ä¿®ç‚¼'] },
        { id: 5, name: 'å¤§ä¸»å®°', author: 'å¤©èš•åœŸè±†', icon: 'ğŸ‘‘', intro: 'å¤§åƒä¸–ç•Œï¼Œä½é¢äº¤æ±‡ï¼Œä¸‡æ—æ—ç«‹ï¼Œç¾¤é›„èŸèƒ...', tags: ['ç„å¹»', 'çƒ­è¡€'] },
        { id: 6, name: 'å…ƒå°Š', author: 'å¤©èš•åœŸè±†', icon: 'ğŸŒŸ', intro: 'å¾æœ‰ä¸€å£ç„é»„æ°”ï¼Œå¯åå¤©åœ°æ—¥æœˆæ˜Ÿï¼', tags: ['ç„å¹»', 'é€†è¢­'] }
      ],
      xuanhuan: [
        { id: 11, name: 'æ–—ç½—å¤§é™†', author: 'å”å®¶ä¸‰å°‘', icon: 'ğŸ’', intro: 'å”é—¨å¤–é—¨å¼Ÿå­å”ä¸‰ï¼Œå› å·å­¦å†…é—¨ç»å­¦ä¸ºå”é—¨æ‰€ä¸å®¹...', tags: ['ç„å¹»', 'é­‚å¸ˆ', 'ç»å…¸'] },
        { id: 12, name: 'é›ªä¸­æ‚åˆ€è¡Œ', author: 'çƒ½ç«æˆè¯¸ä¾¯', icon: 'â„ï¸', intro: 'æ±Ÿæ¹–æ˜¯ä¸€å¼ ç å¸˜ï¼Œå¤§äººç‰©å°äººç‰©ï¼Œæ˜¯ç å­ï¼Œå¤§æ•…äº‹å°æ•…äº‹...', tags: ['æ­¦ä¾ ', 'æ±Ÿæ¹–'] },
        { id: 13, name: 'æ–—ç ´è‹ç©¹', author: 'å¤©èš•åœŸè±†', icon: 'ğŸ”¥', intro: 'ä¸‰åå¹´æ²³ä¸œï¼Œä¸‰åå¹´æ²³è¥¿ï¼Œè«æ¬ºå°‘å¹´ç©·ï¼', tags: ['ç„å¹»', 'çƒ­è¡€'] },
        { id: 14, name: 'å‡¡äººä¿®ä»™ä¼ ', author: 'å¿˜è¯­', icon: 'â›°ï¸', intro: 'ä¸€ä¸ªæ™®é€šå±±æ‘ç©·å°å­ï¼Œå¶ç„¶ä¹‹ä¸‹ï¼Œè·¨å…¥åˆ°ä¸€ä¸ªæ±Ÿæ¹–å°é—¨æ´¾...', tags: ['ä¿®ä»™', 'å‡¡äººæµ'] },
        { id: 15, name: 'ç›˜é¾™', author: 'æˆ‘åƒè¥¿çº¢æŸ¿', icon: 'ğŸ‰', intro: 'çƒ­è¡€æ²¸è…¾çš„ç›˜é¾™ä¸–ç•Œï¼Œä¼—å¤šå¼ºè€…æ—ç«‹...', tags: ['ç„å¹»', 'ç»å…¸'] }
      ],
      xianxia: [
        { id: 21, name: 'å‡¡äººä¿®ä»™ä¼ ', author: 'å¿˜è¯­', icon: 'â›°ï¸', intro: 'ä¸€ä¸ªæ™®é€šçš„å±±æ‘å°‘å¹´ï¼Œæœºç¼˜å·§åˆä¸‹ï¼Œè¸å…¥ä¿®ä»™ä¹‹è·¯...', tags: ['ä¿®ä»™', 'å‡¡äººæµ'] },
        { id: 22, name: 'ä¸€å¿µæ°¸æ’', author: 'è€³æ ¹', icon: 'ğŸŒ™', intro: 'ä¸€å¿µæˆæ²§æµ·ï¼Œä¸€å¿µåŒ–æ¡‘ç”°ã€‚ä¸€å¿µæ–©åƒé­”ï¼Œä¸€å¿µè¯›ä¸‡ä»™ã€‚', tags: ['ä»™ä¾ ', 'è€³æ ¹'] },
        { id: 23, name: 'æˆ‘æ¬²å°å¤©', author: 'è€³æ ¹', icon: 'â˜ï¸', intro: 'æˆ‘è‹¥è¦æœ‰ï¼Œå¤©ä¸å¯æ— ï¼æˆ‘è‹¥è¦æ— ï¼Œå¤©ä¸å¯æœ‰ï¼', tags: ['ä»™ä¾ ', 'ç»å…¸'] },
        { id: 24, name: 'ä»™é€†', author: 'è€³æ ¹', icon: 'âš”ï¸', intro: 'é¡ºä¸ºå‡¡ï¼Œé€†åˆ™ä»™ï¼Œåªåœ¨å¿ƒä¸­ä¸€å¿µé—´...', tags: ['ä»™ä¾ ', 'é€†å¤©'] },
        { id: 25, name: 'æ‹©å¤©è®°', author: 'çŒ«è…»', icon: 'ğŸ“œ', intro: 'å¤ªå§‹å…ƒå¹´ï¼Œæœ‰ç¥çŸ³è‡ªå¤ªç©ºé£æ¥ï¼Œæ•£è½äººé—´...', tags: ['ä»™ä¾ ', 'çŒ«è…»'] }
      ],
      dushi: [
        { id: 31, name: 'å…¨èŒé«˜æ‰‹', author: 'è´è¶è“', icon: 'ğŸ®', intro: 'ç½‘æ¸¸è£è€€ä¸­è¢«èª‰ä¸ºæ•™ç§‘ä¹¦çº§åˆ«çš„é¡¶å°–é«˜æ‰‹å¶ä¿®...', tags: ['éƒ½å¸‚', 'ç”µç«', 'ç»å…¸'] },
        { id: 32, name: 'ä¸€ä¸–ä¹‹å°Š', author: 'çˆ±æ½œæ°´çš„ä¹Œè´¼', icon: 'ğŸ‘¤', intro: 'æˆ‘è¿™ä¸€ç”Ÿï¼Œä¸é—®å‰å°˜ï¼Œä¸æ±‚æ¥ä¸–ï¼Œåªè½°è½°çƒˆçƒˆ...', tags: ['éƒ½å¸‚', 'ç„å¹»'] },
        { id: 33, name: 'é»„é‡‘ç³', author: 'æ‰“çœ¼', icon: 'ğŸ‘ï¸', intro: 'å…¸å½“è¡Œå·¥ä½œçš„å°èŒå‘˜åº„ç¿ï¼Œåœ¨ä¸€æ¬¡æ„å¤–ä¸­çœ¼ç›å‘ç”Ÿå¼‚å˜...', tags: ['éƒ½å¸‚', 'å¼‚èƒ½'] },
        { id: 34, name: 'é‡ç”Ÿä¹‹éƒ½å¸‚ä¿®ä»™', author: 'åé‡Œå‰‘ç¥', icon: 'ğŸ™ï¸', intro: 'é™ˆå‡¡é‡ç”Ÿå›åˆ°é«˜ä¸­æ—¶ä»£ï¼Œè¿™ä¸€ä¸–ä»–è¦å¼¥è¡¥é—æ†¾...', tags: ['éƒ½å¸‚', 'é‡ç”Ÿ'] },
        { id: 35, name: 'è¶…çº§å…µç‹', author: 'æ­¥åƒå¸†', icon: 'ğŸ’ª', intro: 'å…«å¹´é“è¡€ç”Ÿæ¶¯ï¼Œæˆå°±å…µä¸­ä¹‹ç‹...', tags: ['éƒ½å¸‚', 'å…µç‹'] }
      ],
      yanqing: [
        { id: 41, name: 'ä½•ä»¥ç¬™ç®«é»˜', author: 'é¡¾æ¼«', icon: 'ğŸ’•', intro: 'å¦‚æœé‚£æ—¶æˆ‘æ²¡æœ‰æ”¾å¼€ä½ çš„æ‰‹ï¼Œå¤šå¹´ä»¥åæˆ‘ä»¬è¿˜ä¼šåœ¨ä¸€èµ·å—ï¼Ÿ', tags: ['è¨€æƒ…', 'ç»å…¸', 'ç”œ'] },
        { id: 42, name: 'å¾®å¾®ä¸€ç¬‘å¾ˆå€¾åŸ', author: 'é¡¾æ¼«', icon: 'ğŸ’–', intro: 'ä¸€åœºæ¸¸æˆä¸­çš„ç›¸é‡ï¼Œä¸€æ®µç°å®ä¸è™šæ‹Ÿäº¤ç»‡çš„çˆ±æƒ…...', tags: ['è¨€æƒ…', 'æ¸¸æˆ', 'ç”œ'] },
        { id: 43, name: 'ä¸‰ç”Ÿä¸‰ä¸–åé‡Œæ¡ƒèŠ±', author: 'å”ä¸ƒå…¬å­', icon: 'ğŸŒ¸', intro: 'ä¸‰ç”Ÿä¸‰ä¸–ï¼Œåé‡Œæ¡ƒèŠ±ï¼Œåªä¸ºç­‰ä½ å›çœ¸ä¸€ç¬‘...', tags: ['è¨€æƒ…', 'ä»™ä¾ ', 'è™'] },
        { id: 44, name: 'èŠ±åƒéª¨', author: 'Freshæœæœ', icon: 'ğŸŒº', intro: 'èŠ±åƒéª¨æ‹œå¸ˆå­¦è‰ºï¼Œä¸å¸ˆçˆ¶ç™½å­ç”»ä¹‹é—´çš„è™å¿ƒæƒ…ç¼˜...', tags: ['è¨€æƒ…', 'è™å¿ƒ'] },
        { id: 45, name: 'æ­¥æ­¥æƒŠå¿ƒ', author: 'æ¡å', icon: 'â°', intro: 'ä¸€è„šè¸ç©ºçš„ç¬é—´ï¼Œç«Ÿç„¶ç©¿è¶Šåˆ°äº†åº·ç†™å¹´é—´...', tags: ['è¨€æƒ…', 'ç©¿è¶Š', 'ç»å…¸'] }
      ],
      kehuan: [
        { id: 51, name: 'ä¸‰ä½“', author: 'åˆ˜æ…ˆæ¬£', icon: 'ğŸŒŒ', intro: 'åœ°çƒå¾€äº‹ä¸‰éƒ¨æ›²ï¼Œç§‘å¹»å·¨è‘—ï¼Œé›¨æœå¥–è·å¥–ä½œå“ï¼', tags: ['ç§‘å¹»', 'ç¡¬æ ¸', 'ç»å…¸'] },
        { id: 52, name: 'è¶…ç¥æœºæ¢°å¸ˆ', author: 'é½ä½©ç”²', icon: 'ğŸ¤–', intro: 'å¸¦ç€æ¸¸æˆé¢æ¿ç©¿è¶Šåˆ°æ˜Ÿé™…æ—¶ä»£ï¼Œæˆä¸ºä¸€åè¶…ç¥æœºæ¢°å¸ˆ...', tags: ['ç§‘å¹»', 'æ¸¸æˆ'] },
        { id: 53, name: 'å­¦éœ¸çš„é»‘ç§‘æŠ€ç³»ç»Ÿ', author: 'æ™¨æ˜ŸLL', icon: 'ğŸ”¬', intro: 'å­¦æ¸£é€†è¢­æˆå­¦éœ¸ï¼ŒæŒæ¡é»‘ç§‘æŠ€ç³»ç»Ÿ...', tags: ['ç§‘å¹»', 'å­¦éœ¸'] },
        { id: 54, name: 'è¯¡ç§˜ä¹‹ä¸»', author: 'çˆ±æ½œæ°´çš„ä¹Œè´¼', icon: 'ğŸ©', intro: 'è’¸æ±½ä¸æœºæ¢°çš„æ—¶ä»£ï¼Œå…‹è‹é²é£æ ¼çš„ç¥ç§˜ä¸–ç•Œ...', tags: ['ç§‘å¹»', 'å…‹è‹é²'] },
        { id: 55, name: 'å…¨çƒé«˜æ­¦', author: 'è€é¹°åƒå°é¸¡', icon: 'ğŸ¥‹', intro: 'åœ°çƒè¿›å…¥é«˜æ­¦æ—¶ä»£ï¼Œæ­¦è€…ç§°é›„...', tags: ['ç§‘å¹»', 'æ­¦é“'] }
      ]
    },
    
    currentBooks: []
  },

  onLoad() {
    this.loadBooks();
  },

  /**
   * åŠ è½½å½“å‰åˆ†ç±»çš„ä¹¦ç±
   */
  loadBooks() {
    const { currentCategory, recommendBooks } = this.data;
    this.setData({
      currentBooks: recommendBooks[currentCategory] || []
    });
  },

  /**
   * åˆ‡æ¢åˆ†ç±»
   */
  switchCategory(e) {
    const categoryId = e.currentTarget.dataset.id;
    this.setData({
      currentCategory: categoryId
    }, () => {
      this.loadBooks();
    });
  },

  /**
   * è·³è½¬åˆ°æœç´¢é¡µå¹¶è‡ªåŠ¨æœç´¢
   */
  goToSearch(e) {
    const keyword = e.currentTarget.dataset.keyword;
    if (!keyword) return;

    wx.navigateTo({
      url: `/pages/novel/search/search?keyword=${encodeURIComponent(keyword)}`
    });
  }
});
