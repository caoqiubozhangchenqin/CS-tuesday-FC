<!-- pages/novel/shelf/shelf.wxml -->
<bg src="cloud://cloud1-3ge5gomsffe800a7.636c-cloud1-3ge5gomsffe800a7-1373366709/csfc_bg/足球.png" overlayOpacity="0.3" blur="0" sizeMode="cover" repeat="false" />
<view class="container">
  <!-- 背景装饰 -->
  <view class="bg-decoration">
    <view class="bg-circle bg-circle-1"></view>
    <view class="bg-circle bg-circle-2"></view>
    <view class="bg-circle bg-circle-3"></view>
  </view>

  <view class="header">
    <text class="title">📚 我的书架</text>
    <!-- 上传按钮 - 仅管理员可见，缩小并放在右侧 -->
    <view wx:if="{{isAdmin}}" class="upload-btn" bindtap="goToUpload">
      <text class="btn-icon">📤</text>
    </view>
  </view>

  <!-- 加载状态 -->
  <view wx:if="{{loading}}" class="loading-state">
    <text class="loading-icon">⏳</text>
    <text class="loading-text">加载中...</text>
  </view>

  <!-- 书籍列表 -->
  <view wx:elif="{{bookList && bookList.length > 0}}" class="book-list">
    <view wx:for="{{bookList}}" wx:key="id" class="book-card" bindtap="goToReader" data-book="{{item}}">
      <view class="book-cover">
        <text class="cover-icon">📖</text>
        <view class="book-badge">{{item.format}}</view>
      </view>
      <view class="book-info">
        <text class="book-name">{{item.name}}</text>
        <text class="book-meta">{{item.uploadTime}}</text>
      </view>
    </view>
  </view>

  <!-- 空状态 -->
  <view wx:else class="empty-state">
    <text class="empty-icon">📚</text>
    <text class="empty-text">书架空空如也</text>
    <text class="empty-hint">{{isAdmin ? '快去上传你喜欢的小说吧' : '等待管理员上传精彩书籍'}}</text>
    <view wx:if="{{isAdmin}}" class="empty-btn" bindtap="goToUpload">
      <text>📤 立即上传</text>
    </view>
  </view>
</view>
