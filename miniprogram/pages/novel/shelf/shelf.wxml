<!-- pages/novel/shelf/shelf.wxml -->
<view class="container">
  <view class="header">
    <text class="title">ğŸ“š æˆ‘çš„ä¹¦æ¶</text>
    <view class="header-actions">
      <view class="recommend-btn" bindtap="goToRecommend">
        <text class="btn-icon">ğŸ”¥</text>
        <text class="btn-text">æ¨è</text>
      </view>
      <view class="search-btn" bindtap="goToSearch">
        <text class="btn-icon">ğŸ”</text>
        <text class="btn-text">æœç´¢</text>
      </view>
    </view>
  </view>

  <!-- ç»Ÿè®¡ä¿¡æ¯ -->
  <view wx:if="{{bookList && bookList.length > 0}}" class="stats-bar">
    <view class="stat-item">
      <text class="stat-icon">ğŸ“š</text>
      <text class="stat-value">{{bookList.length}}</text>
      <text class="stat-label">æœ¬è—ä¹¦</text>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <text class="stat-icon">ğŸ“–</text>
      <text class="stat-value">{{readingCount}}</text>
      <text class="stat-label">åœ¨è¯»</text>
    </view>
  </view>

  <!-- ä¹¦æ¶åˆ—è¡¨ -->
  <view wx:if="{{bookList && bookList.length > 0}}" class="book-list">
    <view wx:for="{{bookList}}" wx:key="id" class="book-item" bindtap="goToReader" data-book="{{item}}">
      <view class="book-cover">
        <image wx:if="{{item.cover}}" src="{{item.cover}}" mode="aspectFill"></image>
        <view wx:else class="no-cover">ğŸ“–</view>
        <!-- é˜…è¯»è¿›åº¦æ ‡è¯† -->
        <view wx:if="{{item.currentChapter}}" class="reading-badge">é˜…è¯»ä¸­</view>
      </view>
      <view class="book-info">
        <text class="book-name">{{item.name}}</text>
        <text class="book-author">ğŸ‘¤ {{item.author}}</text>
        <text class="book-progress">
          {{item.currentChapter ? 'ğŸ“ ç¬¬' + item.currentChapter + 'ç« ' : 'ğŸ†• æœªå¼€å§‹'}}
        </text>
        <text class="book-time">ğŸ• {{item.addTime}}</text>
      </view>
      <view class="book-actions">
        <view class="action-read">
          <text class="action-icon">ğŸ“–</text>
          <text class="action-label">é˜…è¯»</text>
        </view>
        <view class="book-delete" catchtap="deleteBook" data-id="{{item.id}}">
          <text class="delete-icon">ğŸ—‘ï¸</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:else class="empty-state">
    <text class="empty-icon">ğŸ“š</text>
    <text class="empty-text">ä¹¦æ¶ç©ºç©ºå¦‚ä¹Ÿ</text>
    <view class="empty-btn" bindtap="goToSearch">
      <text>å»æ·»åŠ å°è¯´</text>
    </view>
  </view>
</view>
