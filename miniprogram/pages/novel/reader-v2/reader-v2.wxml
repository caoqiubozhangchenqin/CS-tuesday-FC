<view class="reader-container">
  <!-- é¡¶éƒ¨æ ‡é¢˜æ  -->
  <view class="top-bar" wx:if="{{!showMenu}}">
    <view class="back-btn" bindtap="goBack">
      <text class="icon-back">â†</text>
    </view>
    <text class="novel-title">{{novelInfo.title}}</text>
  </view>

  <!-- æ¨ªå‘ç¿»é¡µé˜…è¯»å™¨ -->
  <swiper 
    class="reader-swiper"
    current="1"
    bindchange="onPageChange"
    vertical="{{false}}"
    circular="{{false}}"
    indicator-dots="{{false}}"
    bindtap="toggleMenu">
    
    <swiper-item wx:for="{{visiblePages}}" wx:key="index">
      <scroll-view scroll-y class="page-scroll">
        <view class="page-content">
          <text class="page-text" style="font-size: {{fontSize}}rpx;">{{item.content}}</text>
        </view>
      </scroll-view>
    </swiper-item>
  </swiper>

  <!-- åº•éƒ¨é¡µç æŒ‡ç¤ºå™¨ -->
  <view class="page-indicator" wx:if="{{!showMenu}}">
    <text>{{pageIndicator}}</text>
  </view>

  <!-- èœå•é¢æ¿ -->
  <view class="menu-panel {{showMenu ? 'show' : ''}}" catchtap="toggleMenu">
    <view class="menu-content" catchtap="doNothing">
      
      <!-- æ ‡é¢˜ä¿¡æ¯ -->
      <view class="menu-header">
        <text class="menu-title">{{novelInfo.title}}</text>
        <text class="menu-author">ä½œè€…ï¼š{{novelInfo.author}}</text>
      </view>

      <!-- è¿›åº¦æ¡ -->
      <view class="progress-section">
        <text class="progress-text">é˜…è¯»è¿›åº¦ï¼š{{((currentPage / totalPages) * 100).toFixed(1)}}%</text>
        <slider 
          value="{{currentPage}}"
          max="{{totalPages - 1}}"
          block-size="20"
          activeColor="#667eea"
          backgroundColor="#eee"
          show-value="{{false}}"
          bindchange="onSliderChange"/>
        <view class="progress-hint">
          <text>ç¬¬ {{currentPage + 1}} é¡µ</text>
          <text>å…± {{totalPages}} é¡µ</text>
        </view>
      </view>

      <!-- æ“ä½œæŒ‰é’® -->
      <view class="menu-actions">
        <view class="action-btn" bindtap="jumpToPage">
          <text class="action-icon">ğŸ“</text>
          <text class="action-text">è·³è½¬</text>
        </view>
        
        <view class="action-btn" bindtap="adjustFontSize">
          <text class="action-icon">ğŸ”¤</text>
          <text class="action-text">å­—å·</text>
        </view>
        
        <view class="action-btn" bindtap="goBack">
          <text class="action-icon">ğŸ“š</text>
          <text class="action-text">ä¹¦æ¶</text>
        </view>
      </view>
    </view>
  </view>
</view>
