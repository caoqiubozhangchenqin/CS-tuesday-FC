<!--pages/schedule/schedule.wxml-->
<bg src="{{bgImageUrl}}" overlayOpacity="0.3" blur="0" sizeMode="cover" repeat="false" />
<view class="container">
  <view class="page-title">
    <text class="title-icon">ğŸ“…</text>
    <text>è”èµ›èµ›ç¨‹</text>
  </view>

<view wx:if="{{isLoading}}" class="loading-tip">æ­£åœ¨åŠ è½½...</view>

<!-- ã€æ ¸å¿ƒä¿®æ”¹ã€‘ä½¿ç”¨ä¸¤å±‚å¾ªç¯æ¥æ¸²æŸ“ -->
<!-- å¤–å±‚å¾ªç¯ï¼šéå†æ¯ä¸€ä¸ªè½®æ¬¡ -->
<view wx:for="{{groupedScheduleList}}" wx:for-item="roundGroup" wx:key="round">
  
  <!-- è½®æ¬¡æ ‡é¢˜ -->
  <view class="round-header">
    <text class="round-icon">ğŸ†</text>
    <text>{{roundGroup.round}}</text>
  </view>
  
  <!-- å†…å±‚å¾ªç¯ï¼šéå†è¯¥è½®æ¬¡ä¸‹çš„æ‰€æœ‰æ¯”èµ› -->
  <view wx:for="{{roundGroup.matches}}" wx:for-item="item" wx:key="_id" class="match-card">
    
    <!-- å¡ç‰‡å¤´éƒ¨ -->
    <view class="card-header">
      <view class="tournament-name">
        <text class="tournament-icon">âš½</text>
        <text>{{item.tournamentName}}</text>
      </view>
      <view class="match-time">
        <text class="time-icon">ğŸ•’</text>
        <text>{{item.matchDate}} {{item.matchTime}}</text>
      </view>
    </view>
    
    <!-- å¡ç‰‡ä¸»ä½“ (ä½¿ç”¨æˆ‘ä»¬æœ€ç»ˆä¼˜åŒ–çš„Gridå¸ƒå±€) -->
    <view class="card-body">
      <view class="team-info home-team {{item.status === 'å·²ç»“æŸ' && item.homeScore > item.awayScore ? 'winner' : ''}} {{item.status === 'å·²ç»“æŸ' && item.homeScore < item.awayScore ? 'loser' : ''}}">
        <view class="team-content">
          <text wx:if="{{item.status === 'å·²ç»“æŸ' && item.homeScore > item.awayScore}}" class="win-badge">WIN</text>
          <view class="team-name-row">
            <text class="team-icon">ğŸ‘•</text>
            <text class="team-name-text">{{item.homeTeam}}</text>
          </view>
        </view>
      </view>
      <view wx:if="{{item.status === 'å·²ç»“æŸ' && item.homeScore !== null}}" class="score-display">
        <text class="score {{item.homeScore > item.awayScore ? 'winning-score' : ''}}">{{item.homeScore}}</text>
        <text class="score-divider">-</text>
        <text class="score {{item.awayScore > item.homeScore ? 'winning-score' : ''}}">{{item.awayScore}}</text>
      </view>
      <view wx:else class="vs">
        <text class="vs-text">VS</text>
      </view>
      <view class="team-info away-team {{item.status === 'å·²ç»“æŸ' && item.awayScore > item.homeScore ? 'winner' : ''}} {{item.status === 'å·²ç»“æŸ' && item.awayScore < item.homeScore ? 'loser' : ''}}">
        <view class="team-content">
          <text wx:if="{{item.status === 'å·²ç»“æŸ' && item.awayScore > item.homeScore}}" class="win-badge">WIN</text>
          <view class="team-name-row">
            <text class="team-name-text">{{item.awayTeam}}</text>
            <text class="team-icon">ğŸ‘•</text>
          </view>
        </view>
      </view>
    </view>
    
    <!-- å¡ç‰‡åº•éƒ¨ -->
    <view wx:if="{{item.notes}}" class="card-footer">
      <text class="note-icon">ğŸ“</text>
      <text>{{item.notes}}</text>
    </view>
    
  </view>
</view>

<view wx:if="{{!isLoading && groupedScheduleList.length === 0}}" class="empty-tip">
  æš‚æ— èµ›ç¨‹ä¿¡æ¯
</view>

</view>