<!-- 管理员上传小说页面（精简版） -->
<bg src="cloud://cloud1-3ge5gomsffe800a7.636c-cloud1-3ge5gomsffe800a7-1373366709/csfc_bg/足球.png" overlayOpacity="0.3" blur="0" sizeMode="cover" repeat="false" />
<view class="container">

  <!-- 标题区域 -->
  <view class="title">
    <text class="title-icon">📚</text>
    <text>上传小说</text>
  </view>

  <!-- 上传区域 -->
  <view class="upload-section">
    <view class="upload-card">
      <!-- 文件选择按钮 -->
      <view class="file-select-area" wx:if="{{!selectedFile}}">
        <button class="simple-choose-btn" bindtap="chooseFile">选择文件</button>
      </view>

      <!-- 上传按钮 -->
      <view class="upload-controls">
        <button class="upload-button" bindtap="startUpload" disabled="{{uploading || !selectedFile}}">
          <text class="button-text">{{uploading ? '上传中...' : '上传'}}</text>
        </button>
      </view>
    </view>
  </view>

  <!-- 小说列表 -->
  <view class="novels-section">
    <view class="novels-list" wx:if="{{novelList.length > 0}}">
      <view class="section-title">已上传小说</view>
      <view wx:for="{{novelList}}" wx:key="_id" class="novel-item">
        <view class="novel-simple-card">
          <text class="novel-title">{{item.title}}</text>
          <text class="novel-time">{{item.uploadTime}}</text>
          <button class="simple-delete-btn" bindtap="showDeleteConfirm" data-novel="{{item}}">删除</button>
        </view>
      </view>
    </view>

    <view class="empty-state" wx:else>
      <text class="empty-title">暂无上传记录</text>
    </view>
  </view>
</view>

<!-- 现代化删除确认弹窗 -->
<view class="modal-overlay" wx:if="{{showDeleteModal}}" bindtap="hideDeleteModal">
  <view class="delete-modal" bindtap="">
    <view class="modal-header">
      <view class="modal-icon">⚠️</view>
      <text class="modal-title">确认删除</text>
    </view>
    <view class="modal-content">
      <text class="modal-message">确定要删除小说</text>
      <text class="modal-novel-title">《{{deleteNovelTitle}}》</text>
      <text class="modal-warning">吗？此操作不可恢复！</text>
    </view>
    <view class="modal-actions">
      <button class="modal-btn cancel-btn" bindtap="hideDeleteModal">取消</button>
      <button class="modal-btn confirm-btn" bindtap="confirmDeleteNovel">确认删除</button>
    </view>
  </view>
</view>
